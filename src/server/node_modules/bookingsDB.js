// var PouchDB = require('pouchdb')
var PouchDB = require('pouchdb-core')
  .plugin(require('pouchdb-adapter-http'))
  .plugin(require('pouchdb-authentication'));
//  .plugin(require('pouchdb-adapter-http'))
//   .plugin(require('pouchdb-authentication'));

// PouchDB.plugin(require('pouchdb-authentication'));

function db(remote) {
  let db;
  try {
    const dbUrl = remote
      ? 'http://nicholware.com:5984/bookings'
      : 'http://aidan:admin@localhost:5984/devbookings';
    db = new PouchDB(dbUrl, {});
    console.log('db:', dbUrl);
    return db;
  } catch (error) {
    console.log(error);
  }
}
// var db;
// const { DbSettings, mode } = require('../../ducks/settings-duck');
// const Logit = require('logit.js');
// var logit = Logit(__filename);
// const adapter = DbSettings.adapter || 'websql';

// logit('PouchDB creating', PouchDB);

// logit('DbSettings', mode, DbSettings);
// const localDb = DbSettings.localname;
// logit('localDb', localDb, adapter);

// db = new PouchDB(localDb);

// // sync();
// logit('PouchDB created', db);
// db.info().then(function(info) {
//   logit('Bookings Info', info);
// });

module.exports = db;
